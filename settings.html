<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - GamiCon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* Base styles */
        body { font-family: 'Poppins', sans-serif; transition: background-color 0.3s, color 0.3s; }
        .font-gamer {
            font-family: 'Press Start 2P', cursive;
        }

        /* --- THEME STYLES --- */

        /* 1. New GamiCon Default Theme */
        body.theme-default {
            background-color: #090a0f;
            background-image:
                radial-gradient(ellipse at top, #1b2735, #090a0f),
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.06'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.59l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            color: #d1d5db;
        }
        .theme-default .font-gamer {
             text-shadow:
                0 0 5px rgba(139, 92, 246, 0.4),
                0 0 10px rgba(139, 92, 246, 0.3);
        }
        .theme-default .settings-panel {
            background-color: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 12px;
        }
        .theme-default header p { color: #9ca3af; }
        .theme-default .close-button-esc { color: #9ca3af; }
        .theme-default .close-button-esc:hover { color: white; transform: scale(1.1); }
        .theme-default .option-card {
            background-color: rgba(30, 41, 59, 0.6);
            border: 2px solid #374151;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border-radius: 8px;
        }
        .theme-default .option-card:hover {
             border-color: #8b5cf6;
        }
        .theme-default .option-card.selected {
            border-color: #8b5cf6;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
            transform: scale(1.05);
        }
        .theme-default .section-separator { border-color: rgba(139, 92, 246, 0.15); }

        /* 2. Light Gray Theme */
        body.theme-light-gray { background-color: #f4f4f5; color: #334155; }
        .theme-light-gray .settings-panel { background-color: #ffffff; border: 1px solid #e5e7eb; border-radius: 12px; }
        .theme-light-gray header p { color: #64748b; }
        .theme-light-gray .close-button-esc { color: #9ca3af; }
        .theme-light-gray .close-button-esc:hover { color: #1f2937; transform: scale(1.1); }
        .theme-light-gray .option-card { background-color: #f9fafb; border: 2px solid #e5e7eb; padding: 1.5rem; cursor: pointer; border-radius: 8px; transition: all .2s; }
        .theme-light-gray .option-card.selected { border-color: #3b82f6; box-shadow: 0 0 15px rgba(59, 130, 246, 0.4); transform: scale(1.05); }
        .theme-light-gray .section-separator { border-color: #e5e7eb; }

        /* 3. True Dark Theme */
        body.theme-true-dark { background-color: #000; color: #fff; }
        .theme-true-dark .settings-panel { background-color: #101010; border: 1px solid #333; border-radius: 12px;}
        .theme-true-dark header p { color: #aaa; }
        .theme-true-dark .close-button-esc { color: #888; }
        .theme-true-dark .close-button-esc:hover { color: #fff; transform: scale(1.1); }
        .theme-true-dark .option-card { background-color: #181818; border: 2px solid #333; padding: 1.5rem; cursor: pointer; border-radius: 8px; transition: all .2s; }
        .theme-true-dark .option-card.selected { border-color: #fff; box-shadow: 0 0 15px rgba(255, 255, 255, 0.3); transform: scale(1.05); }
        .theme-true-dark .section-separator { border-color: #333; }

        /* Shared Component Styles */
        .close-button-esc { position: fixed; top: 2rem; right: 2.5rem; display: flex; flex-direction: column; align-items: center; transition: all 0.2s; z-index: 100; text-decoration: none; }
        .close-button-esc:hover { transform: scale(1.1); }
        .close-button-esc span { margin-top: 0.5rem; font-size: 0.8rem; letter-spacing: 0.1em; font-weight: 600; }
        .theme-preview { display: flex; width: 100%; height: 80px; margin-bottom: 1rem; border: 2px solid; border-radius: 6px; padding: 0.5rem; gap: 0.5rem; }
        .preview-sidebar { width: 30%; border-radius: 4px; }
        .preview-content { flex: 1; border-radius: 4px; }
        .preview-light-gray { border-color: #d1d5db; background-color: #f1f5f9; }
        .preview-light-gray .preview-sidebar { background-color: #e5e7eb; }
        .preview-light-gray .preview-content { background-color: #f9fafb; }

        .preview-default { border-color: rgba(139, 92, 246, 0.4); background-color: #090a0f; }
        .preview-default .preview-sidebar { background-color: #111827; }
        .preview-default .preview-content { background-color: rgba(139, 92, 246, 0.3); }

        .preview-true-dark { border-color: #555; background-color: #181818;}
        .preview-true-dark .preview-sidebar { background-color: #000; }
        .preview-true-dark .preview-content { background-color: #111; }
    </style>
</head>
<body class="theme-default">
    <a href="home1.html" class="close-button-esc">
        <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
        <span data-translate-key="esc"></span>
    </a>
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="settings-panel w-full max-w-4xl p-6 md:p-10">
            <header class="mb-10 text-center">
                <h1 class="font-gamer text-2xl md:text-3xl" data-translate-key="settingsTitle"></h1>
                <p class="text-base mt-3" data-translate-key="settingsSubtitle"></p>
            </header>
            <div class="space-y-10">
                <section>
                    <h2 class="font-gamer text-xl mb-6 text-center md:text-left" data-translate-key="settingsAppearance"></h2>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                        <div id="theme-default" class="option-card">
                            <div class="theme-preview preview-default"><div class="preview-sidebar"></div><div class="preview-content"></div></div>
                            <h3 class="font-semibold" data-translate-key="settingsThemeDefault"></h3>
                        </div>
                        <div id="theme-true-dark" class="option-card">
                            <div class="theme-preview preview-true-dark"><div class="preview-sidebar"></div><div class="preview-content"></div></div>
                            <h3 class="font-semibold" data-translate-key="settingsThemeDark"></h3>
                        </div>
                        <div id="theme-light-gray" class="option-card">
                            <div class="theme-preview preview-light-gray"><div class="preview-sidebar"></div><div class="preview-content"></div></div>
                            <h3 class="font-semibold" data-translate-key="settingsThemeLight"></h3>
                        </div>
                    </div>
                </section>
                <hr class="section-separator border-t">
                <section>
                    <h2 class="font-gamer text-xl mb-6 text-center md:text-left" data-translate-key="settingsLanguage"></h2>
                     <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
                        <div id="lang-en" class="option-card">
                            <h3 class="text-xl font-bold mt-4" data-translate-key="settingsLangEn"></h3>
                        </div>
                        <div id="lang-th" class="option-card">
                            <h3 class="text-xl font-bold mt-4" data-translate-key="settingsLangTh"></h3>
                        </div>
                    </div>
                </section>
                <hr class="section-separator border-t">
                <section>
                    <h2 class="font-gamer text-xl mb-4" data-translate-key="settingsAccount"></h2>
                    <p class="text-sm text-slate-400" data-translate-key="settingsComingSoon"></p>
                </section>
            </div>
        </div>
    </div>
    
    <!-- FIX: Recreated the missing translation logic and embedded it here -->
    <script>
        const translations = {
            en: {
                esc: "BACK",
                settingsTitle: "SETTINGS",
                settingsSubtitle: "Customize your GamiCon experience",
                settingsAppearance: "Appearance",
                settingsThemeDefault: "GamiCon",
                settingsThemeDark: "True Dark",
                settingsThemeLight: "Light Gray",
                settingsLanguage: "Language",
                settingsLangEn: "English",
                settingsLangTh: "Thai",
                settingsAccount: "Account",
                settingsComingSoon: "Account management options are coming soon.",
            },
            th: {
                esc: "กลับ",
                settingsTitle: "การตั้งค่า",
                settingsSubtitle: "ปรับแต่งประสบการณ์ GamiCon ของคุณ",
                settingsAppearance: "ธีม",
                settingsThemeDefault: "GamiCon",
                settingsThemeDark: "มืดสนิท",
                settingsThemeLight: "เทาสว่าง",
                settingsLanguage: "ภาษา",
                settingsLangEn: "อังกฤษ",
                settingsLangTh: "ไทย",
                settingsAccount: "บัญชี",
                settingsComingSoon: "ตัวเลือกการจัดการบัญชีจะมาในเร็ว ๆ นี้",
            }
        };

        function setLanguage(lang) {
            const langData = translations[lang] || translations.en;
            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.getAttribute('data-translate-key');
                if (langData[key]) {
                    el.textContent = langData[key];
                }
            });
        }
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            
            // --- THEME LOGIC ---
            const themeButtons = document.querySelectorAll('#theme-light-gray, #theme-default, #theme-true-dark');
            const applyTheme = (theme) => {
                body.className = body.className.replace(/theme-\S+/g, '').trim();
                body.classList.add(theme);
                themeButtons.forEach(btn => btn.classList.toggle('selected', btn.id === theme));
                localStorage.setItem('gamicon_theme', theme);
            };
            themeButtons.forEach(button => button.addEventListener('click', () => applyTheme(button.id)));
            applyTheme(localStorage.getItem('gamicon_theme') || 'theme-default');

            // --- LANGUAGE LOGIC ---
            const langButtons = document.querySelectorAll('#lang-en, #lang-th');
            const applyLanguageSelection = (lang) => {
                // This function is now available from the script block above
                if(typeof setLanguage === 'function') {
                    setLanguage(lang); 
                }
                langButtons.forEach(btn => btn.classList.toggle('selected', btn.id === `lang-${lang}`));
                localStorage.setItem('gamicon_lang', lang);
            };
            langButtons.forEach(button => button.addEventListener('click', () => applyLanguageSelection(button.id.split('-')[1])));
            applyLanguageSelection(localStorage.getItem('gamicon_lang') || 'en');

            // --- DYNAMIC "BACK" BUTTON ---
            const closeButton = document.querySelector('.close-button-esc');
            const urlParams = new URLSearchParams(window.location.search);
            const returnPage = urlParams.get('from');

            if (returnPage) {
                closeButton.href = returnPage;
            } else {
                closeButton.href = 'home1.html'; 
            }
        });
    </script>
</body>
</html>
